<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Updated Long Sleeve Size Predictor Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .test-case {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .test-input {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        .test-result {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }
        .test-error {
            background: #f8d7da;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #dc3545;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .size-chart {
            overflow-x: auto;
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .highlight {
            background-color: #fff3cd;
            font-weight: bold;
        }
        .red-text {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Updated Long Sleeve Size Predictor Test</h1>
        <p>Testing the updated long sleeve shirt functionality with the new size chart data.</p>
        
        <div class="test-section">
            <h2>Updated Size Chart Data</h2>
            <p>The following size chart data has been updated to match the provided measurements:</p>
            
            <div class="size-chart">
                <table>
                    <thead>
                        <tr>
                            <th>Size</th>
                            <th>Length (cm)</th>
                            <th>Chest (Cir) cm</th>
                            <th>Shoulder (cm)</th>
                            <th>Neck Width (cm)</th>
                            <th>Sleeve Length (cm)</th>
                            <th>Sleeve Opening (Cir) cm</th>
                            <th>Arm Hole (Cir) cm</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>XS</strong></td>
                            <td>73</td>
                            <td class="highlight">102</td>
                            <td class="highlight">40</td>
                            <td class="red-text">13</td>
                            <td>65</td>
                            <td class="highlight red-text">37</td>
                            <td class="highlight">48</td>
                        </tr>
                        <tr>
                            <td><strong>S</strong></td>
                            <td>74</td>
                            <td class="highlight">106</td>
                            <td class="highlight">42</td>
                            <td class="red-text">14</td>
                            <td>65.5</td>
                            <td class="highlight red-text">38</td>
                            <td class="highlight">50</td>
                        </tr>
                        <tr>
                            <td><strong>M</strong></td>
                            <td>75</td>
                            <td class="highlight">110</td>
                            <td class="highlight">44</td>
                            <td class="red-text">15</td>
                            <td>66</td>
                            <td class="highlight red-text">39</td>
                            <td class="highlight">52</td>
                        </tr>
                        <tr>
                            <td><strong>L</strong></td>
                            <td>76</td>
                            <td class="highlight">114</td>
                            <td class="highlight">46</td>
                            <td class="red-text">16</td>
                            <td>66.5</td>
                            <td class="highlight red-text">40</td>
                            <td class="highlight">54</td>
                        </tr>
                        <tr>
                            <td><strong>XL</strong></td>
                            <td>77</td>
                            <td class="highlight">118</td>
                            <td class="highlight">47</td>
                            <td class="red-text">17</td>
                            <td>67</td>
                            <td class="highlight red-text">42</td>
                            <td class="highlight">56</td>
                        </tr>
                        <tr>
                            <td><strong>XXL</strong></td>
                            <td>78</td>
                            <td class="highlight">122</td>
                            <td class="highlight">48</td>
                            <td class="red-text">18</td>
                            <td>67.5</td>
                            <td class="highlight red-text">43</td>
                            <td class="highlight">58</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <p><strong>Legend:</strong></p>
            <ul>
                <li><span class="highlight">Yellow highlight</span> = Chest, Shoulder, and Arm Hole measurements</li>
                <li><span class="red-text">Red text</span> = Neck Width and Sleeve Opening measurements</li>
                <li>All measurements are in centimeters (cm)</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>Test Cases</h2>
            <p>Click the buttons below to test different scenarios:</p>
            
            <button onclick="testExactSizeMatch()">Test Exact Size Match (Size M)</button>
            <button onclick="testDifferentBodyTypes()">Test Different Body Types</button>
            <button onclick="testEstimatedMeasurements()">Test Estimated Measurements</button>
            <button onclick="testEdgeCases()">Test Edge Cases</button>
            <button onclick="testAllSizes()">Test All Sizes</button>
        </div>

        <div id="testResults"></div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:3000';

        // Test exact size match for Size M
        async function testExactSizeMatch() {
            const testCase = {
                name: 'Exact Size M Match',
                input: {
                    height: 175,
                    weight: 70,
                    age: 30,
                    gender: 'male',
                    bodyType: 'average',
                    measurements: {
                        chestCircumference: 110,
                        shoulderWidth: 44,
                        sleeveLength: 66,
                        neckWidth: 15,
                        sleeveOpeningCircumference: 39,
                        armHoleCircumference: 52,
                        totalLength: 75
                    },
                    garmentType: 'long-sleeve'
                }
            };

            await runTest(testCase);
        }

        // Test different body types
        async function testDifferentBodyTypes() {
            const bodyTypes = ['slim', 'athletic', 'plus', 'average'];
            const baseMeasurements = {
                chestCircumference: 110,
                shoulderWidth: 44,
                sleeveLength: 66,
                neckWidth: 15,
                sleeveOpeningCircumference: 39,
                armHoleCircumference: 52,
                totalLength: 75
            };

            for (const bodyType of bodyTypes) {
                const testCase = {
                    name: `Body Type: ${bodyType}`,
                    input: {
                        height: 175,
                        weight: 70,
                        age: 30,
                        gender: 'male',
                        bodyType: bodyType,
                        measurements: baseMeasurements,
                        garmentType: 'long-sleeve'
                    }
                };
                await runTest(testCase);
            }
        }

        // Test estimated measurements
        async function testEstimatedMeasurements() {
            const testCase = {
                name: 'Estimated Measurements Only',
                input: {
                    height: 175,
                    weight: 70,
                    age: 30,
                    gender: 'male',
                    bodyType: 'average',
                    measurements: {},
                    garmentType: 'long-sleeve'
                }
            };

            await runTest(testCase);
        }

        // Test edge cases
        async function testEdgeCases() {
            const edgeCases = [
                {
                    name: 'Very Tall Person (200cm)',
                    input: {
                        height: 200,
                        weight: 80,
                        age: 25,
                        gender: 'male',
                        bodyType: 'athletic',
                        measurements: {},
                        garmentType: 'long-sleeve'
                    }
                },
                {
                    name: 'Short Person (150cm)',
                    input: {
                        height: 150,
                        weight: 50,
                        age: 25,
                        gender: 'female',
                        bodyType: 'slim',
                        measurements: {},
                        garmentType: 'long-sleeve'
                    }
                },
                {
                    name: 'Heavy Person (100kg)',
                    input: {
                        height: 175,
                        weight: 100,
                        age: 35,
                        gender: 'male',
                        bodyType: 'plus',
                        measurements: {},
                        garmentType: 'long-sleeve'
                    }
                }
            ];

            for (const testCase of edgeCases) {
                await runTest(testCase);
            }
        }

        // Test all sizes
        async function testAllSizes() {
            const sizes = [
                { size: 'XS', chest: 102, shoulder: 40, sleeve: 65, neck: 13, sleeveOpening: 37, armHole: 48, length: 73 },
                { size: 'S', chest: 106, shoulder: 42, sleeve: 65.5, neck: 14, sleeveOpening: 38, armHole: 50, length: 74 },
                { size: 'M', chest: 110, shoulder: 44, sleeve: 66, neck: 15, sleeveOpening: 39, armHole: 52, length: 75 },
                { size: 'L', chest: 114, shoulder: 46, sleeve: 66.5, neck: 16, sleeveOpening: 40, armHole: 54, length: 76 },
                { size: 'XL', chest: 118, shoulder: 47, sleeve: 67, neck: 17, sleeveOpening: 42, armHole: 56, length: 77 },
                { size: 'XXL', chest: 122, shoulder: 48, sleeve: 67.5, neck: 18, sleeveOpening: 43, armHole: 58, length: 78 }
            ];

            for (const sizeData of sizes) {
                const testCase = {
                    name: `Size ${sizeData.size} Exact Match`,
                    input: {
                        height: 175,
                        weight: 70,
                        age: 30,
                        gender: 'male',
                        bodyType: 'average',
                        measurements: {
                            chestCircumference: sizeData.chest,
                            shoulderWidth: sizeData.shoulder,
                            sleeveLength: sizeData.sleeve,
                            neckWidth: sizeData.neck,
                            sleeveOpeningCircumference: sizeData.sleeveOpening,
                            armHoleCircumference: sizeData.armHole,
                            totalLength: sizeData.length
                        },
                        garmentType: 'long-sleeve'
                    }
                };
                await runTest(testCase);
            }
        }

        // Run a test case
        async function runTest(testCase) {
            const resultsDiv = document.getElementById('testResults');
            
            // Create test case display
            const testDiv = document.createElement('div');
            testDiv.className = 'test-case';
            testDiv.innerHTML = `
                <h3>${testCase.name}</h3>
                <div class="test-input">
                    <strong>Input:</strong><br>
                    Height: ${testCase.input.height}cm, Weight: ${testCase.input.weight}kg<br>
                    Age: ${testCase.input.age}, Gender: ${testCase.input.gender}, Body Type: ${testCase.input.bodyType}<br>
                    Garment Type: ${testCase.input.garmentType}<br>
                    Measurements: ${Object.keys(testCase.input.measurements).length > 0 ? JSON.stringify(testCase.input.measurements, null, 2) : 'None (estimated)'}
                </div>
                <div>Testing...</div>
            `;
            
            resultsDiv.appendChild(testDiv);

            try {
                const response = await fetch(`${API_BASE_URL}/api/predict-size`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testCase.input)
                });

                const result = await response.json();

                if (result.success) {
                    testDiv.innerHTML = `
                        <h3>${testCase.name}</h3>
                        <div class="test-input">
                            <strong>Input:</strong><br>
                            Height: ${testCase.input.height}cm, Weight: ${testCase.input.weight}kg<br>
                            Age: ${testCase.input.age}, Gender: ${testCase.input.gender}, Body Type: ${testCase.input.bodyType}<br>
                            Garment Type: ${testCase.input.garmentType}<br>
                            Measurements: ${Object.keys(testCase.input.measurements).length > 0 ? JSON.stringify(testCase.input.measurements, null, 2) : 'None (estimated)'}
                        </div>
                        <div class="test-result">
                            <strong>Result:</strong><br>
                            Predicted Size: <strong>${result.predictedSize.size}</strong><br>
                            Confidence: <strong>${result.confidence}%</strong><br>
                            Recommendations: ${result.recommendations.join(', ')}
                        </div>
                    `;
                } else {
                    testDiv.innerHTML = `
                        <h3>${testCase.name}</h3>
                        <div class="test-input">
                            <strong>Input:</strong><br>
                            Height: ${testCase.input.height}cm, Weight: ${testCase.input.weight}kg<br>
                            Age: ${testCase.input.age}, Gender: ${testCase.input.gender}, Body Type: ${testCase.input.bodyType}<br>
                            Garment Type: ${testCase.input.garmentType}<br>
                            Measurements: ${Object.keys(testCase.input.measurements).length > 0 ? JSON.stringify(testCase.input.measurements, null, 2) : 'None (estimated)'}
                        </div>
                        <div class="test-error">
                            <strong>Error:</strong> ${result.error}
                        </div>
                    `;
                }
            } catch (error) {
                testDiv.innerHTML = `
                    <h3>${testCase.name}</h3>
                    <div class="test-input">
                        <strong>Input:</strong><br>
                        Height: ${testCase.input.height}cm, Weight: ${testCase.input.weight}kg<br>
                        Age: ${testCase.input.age}, Gender: ${testCase.input.gender}, Body Type: ${testCase.input.bodyType}<br>
                        Garment Type: ${testCase.input.garmentType}<br>
                        Measurements: ${Object.keys(testCase.input.measurements).length > 0 ? JSON.stringify(testCase.input.measurements, null, 2) : 'None (estimated)'}
                    </div>
                    <div class="test-error">
                        <strong>Network Error:</strong> ${error.message}
                    </div>
                `;
            }
        }

        // Clear test results
        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
        }
    </script>
</body>
</html>
